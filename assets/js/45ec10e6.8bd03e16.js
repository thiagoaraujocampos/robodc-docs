"use strict";(globalThis.webpackChunkrobodc_docs=globalThis.webpackChunkrobodc_docs||[]).push([[172],{2805:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"robo-1gen/software/arquitetura-ros1","title":"Arquitetura ROS 1","description":"Vis\xe3o Geral","source":"@site/docs/robo-1gen/software/arquitetura-ros1.md","sourceDirName":"robo-1gen/software","slug":"/robo-1gen/software/arquitetura-ros1","permalink":"/robodc-docs/robo-1gen/software/arquitetura-ros1","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/robo-1gen/software/arquitetura-ros1.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"Estrutura dos Reposit\xf3rios","permalink":"/robodc-docs/robo-1gen/estrutura-repositorio"},"next":{"title":"Funcionalidades Principais","permalink":"/robodc-docs/robo-1gen/software/funcionalidades"}}');var d=n(4848),o=n(8453);const i={sidebar_position:1},l="Arquitetura ROS 1",a={},c=[{value:"Vis\xe3o Geral",id:"vis\xe3o-geral",level:2},{value:"Arquitetura de Hardware + Software",id:"arquitetura-de-hardware--software",level:2},{value:"Pacote Principal: mobile_rob_dev",id:"pacote-principal-mobile_rob_dev",level:2},{value:"Estrutura do C\xf3digo",id:"estrutura-do-c\xf3digo",level:3},{value:"N\xf3 Principal: <code>mobile_rob_dev_node</code>",id:"n\xf3-principal-mobile_rob_dev_node",level:3},{value:"Arquivo: robotMain.cpp",id:"arquivo-robotmaincpp",level:4},{value:"Arquivo: robotSystem.cpp",id:"arquivo-robotsystemcpp",level:4},{value:"T\xf3picos e Mensagens",id:"t\xf3picos-e-mensagens",level:2},{value:"T\xf3picos de Sensores",id:"t\xf3picos-de-sensores",level:3},{value:"T\xf3picos de Controle",id:"t\xf3picos-de-controle",level:3},{value:"T\xf3picos de Navega\xe7\xe3o",id:"t\xf3picos-de-navega\xe7\xe3o",level:3},{value:"T\xf3picos de Estado",id:"t\xf3picos-de-estado",level:3},{value:"Servi\xe7os",id:"servi\xe7os",level:2},{value:"Actions",id:"actions",level:2},{value:"Diagrama de Intera\xe7\xe3o",id:"diagrama-de-intera\xe7\xe3o",level:2},{value:"Fluxo de Dados",id:"fluxo-de-dados",level:2},{value:"1. Percep\xe7\xe3o",id:"1-percep\xe7\xe3o",level:3},{value:"2. Decis\xe3o",id:"2-decis\xe3o",level:3},{value:"3. A\xe7\xe3o",id:"3-a\xe7\xe3o",level:3},{value:"Par\xe2metros ROS",id:"par\xe2metros-ros",level:2},{value:"Par\xe2metros Globais",id:"par\xe2metros-globais",level:3},{value:"Par\xe2metros por N\xf3",id:"par\xe2metros-por-n\xf3",level:3},{value:"Base Controller",id:"base-controller",level:4},{value:"Move Base",id:"move-base",level:4},{value:"Robot Localization (EKF)",id:"robot-localization-ekf",level:4},{value:"AMCL",id:"amcl",level:4},{value:"Transforma\xe7\xf5es (TF)",id:"transforma\xe7\xf5es-tf",level:2},{value:"Frames Principais",id:"frames-principais",level:3},{value:"Configura\xe7\xe3o de Launch",id:"configura\xe7\xe3o-de-launch",level:2}];function t(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(r.header,{children:(0,d.jsx)(r.h1,{id:"arquitetura-ros-1",children:"Arquitetura ROS 1"})}),"\n",(0,d.jsx)(r.h2,{id:"vis\xe3o-geral",children:"Vis\xe3o Geral"}),"\n",(0,d.jsxs)(r.p,{children:["A arquitetura do rob\xf4 de 1\xaa gera\xe7\xe3o \xe9 baseada em ",(0,d.jsx)(r.strong,{children:"ROS 1 Noetic Ninjemys"})," rodando em Ubuntu 20.04 LTS. O sistema \xe9 composto pelo pacote principal ",(0,d.jsx)(r.code,{children:"mobile_rob_dev"})," (do reposit\xf3rio vivaldini/ROBO_DC), que implementa controle de baixo n\xedvel, odometria e comunica\xe7\xe3o serial com o Arduino/Pico, al\xe9m de pacotes padr\xe3o do ROS para navega\xe7\xe3o (move_base, AMCL) e sensoriamento (Hokuyo LiDAR)."]}),"\n",(0,d.jsx)(r.h2,{id:"arquitetura-de-hardware--software",children:"Arquitetura de Hardware + Software"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502                   RASPBERRY PI 4 (ROS MASTER)                   \u2502\r\n\u2502                                                                 \u2502\r\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\r\n\u2502  \u2502 roscore     \u2502   \u2502 mobile_rob_  \u2502   \u2502 move_base          \u2502  \u2502\r\n\u2502  \u2502 (ROS Master)\u2502\u25c4\u2500\u2500\u2524 dev_node     \u2502\u25c4\u2500\u2500\u2524 (navigation)       \u2502  \u2502\r\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502 (40 Hz)      \u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\r\n\u2502                    \u2502              \u2502                            \u2502\r\n\u2502                    \u2502 - Serial I/O \u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\r\n\u2502                    \u2502 - Odometry   \u2502\u25c4\u2500\u2500\u2524 amcl               \u2502  \u2502\r\n\u2502                    \u2502 - Cmd Vel    \u2502   \u2502 (localization)     \u2502  \u2502\r\n\u2502                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\r\n\u2502                           \u2502                                    \u2502\r\n\u2502                           \u2502 /dev/ttyACM0                       \u2502\r\n\u2502                           \u2502 115200 baud                        \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n                            \u2502 Serial (USB)\r\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502               ARDUINO / RASPBERRY PI PICO                       \u2502\r\n\u2502                                                                 \u2502\r\n\u2502  - Leitura de encoders                                          \u2502\r\n\u2502  - Controle PWM dos motores                                     \u2502\r\n\u2502  - Comunica\xe7\xe3o serial: envia (x, y, theta), recebe (vl, vr)    \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n\r\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502                    HOKUYO LIDAR (Ethernet)                      \u2502\r\n\u2502                                                                 \u2502\r\n\u2502  - Conecta diretamente \xe0 RPi4 via RJ45                          \u2502\r\n\u2502  - Driver: urg_node ou hokuyo_node                              \u2502\r\n\u2502  - Publica /scan (sensor_msgs/LaserScan)                        \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,d.jsx)(r.h2,{id:"pacote-principal-mobile_rob_dev",children:"Pacote Principal: mobile_rob_dev"}),"\n",(0,d.jsx)(r.h3,{id:"estrutura-do-c\xf3digo",children:"Estrutura do C\xf3digo"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:"mobile_rob_dev/\r\n\u251c\u2500\u2500 src/\r\n\u2502   \u2514\u2500\u2500 mobile_rob_dev/\r\n\u2502       \u251c\u2500\u2500 robotMain.cpp        # Main loop do n\xf3 ROS\r\n\u2502       \u251c\u2500\u2500 robotSystem.cpp      # Sistema: serial, odometria, ROS\r\n\u2502       \u2514\u2500\u2500 robot.cpp            # Classe Robot (cinem\xe1tica, comandos)\r\n\u251c\u2500\u2500 include/\r\n\u2502   \u2514\u2500\u2500 mobile_rob_dev/\r\n\u2502       \u251c\u2500\u2500 robotSystem.h\r\n\u2502       \u251c\u2500\u2500 robot.h\r\n\u2502       \u2514\u2500\u2500 definitions.h        # Constantes e defini\xe7\xf5es\r\n\u251c\u2500\u2500 scripts/\r\n\u2502   \u2514\u2500\u2500 send_goal.py             # Script para enviar goals (actionlib)\r\n\u251c\u2500\u2500 launch/\r\n\u2502   \u2514\u2500\u2500 robot.launch             # Launch file principal\r\n\u251c\u2500\u2500 CMakeLists.txt\r\n\u2514\u2500\u2500 package.xml\n"})}),"\n",(0,d.jsxs)(r.h3,{id:"n\xf3-principal-mobile_rob_dev_node",children:["N\xf3 Principal: ",(0,d.jsx)(r.code,{children:"mobile_rob_dev_node"})]}),"\n",(0,d.jsx)(r.h4,{id:"arquivo-robotmaincpp",children:"Arquivo: robotMain.cpp"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-cpp",children:'int main(int argc, char **argv)\r\n{\r\n    ros::init(argc, argv, "mobile_rob_dev");\r\n    ros::NodeHandle n;\r\n    \r\n    // Instancia sistema do rob\xf4\r\n    System system(&n);\r\n    \r\n    // Loop principal a 40 Hz\r\n    ros::Rate loop_rate(40);\r\n    \r\n    while (ros::ok())\r\n    {\r\n        system.step();  // Atualiza sistema\r\n        ros::spinOnce();\r\n        loop_rate.sleep();\r\n    }\r\n    \r\n    return 0;\r\n}\n'})}),"\n",(0,d.jsxs)(r.p,{children:[(0,d.jsx)(r.strong,{children:"Caracter\xedsticas"}),":"]}),"\n",(0,d.jsxs)(r.ul,{children:["\n",(0,d.jsxs)(r.li,{children:["Taxa de execu\xe7\xe3o: ",(0,d.jsx)(r.strong,{children:"40 Hz"})," (25ms por ciclo)"]}),"\n",(0,d.jsxs)(r.li,{children:["Processa callbacks ROS (",(0,d.jsx)(r.code,{children:"ros::spinOnce()"}),")"]}),"\n",(0,d.jsxs)(r.li,{children:["Chama ",(0,d.jsx)(r.code,{children:"system.step()"})," para atualizar estado"]}),"\n"]}),"\n",(0,d.jsx)(r.h4,{id:"arquivo-robotsystemcpp",children:"Arquivo: robotSystem.cpp"}),"\n",(0,d.jsxs)(r.p,{children:["Implementa a classe ",(0,d.jsx)(r.code,{children:"System"}),", respons\xe1vel por:"]}),"\n",(0,d.jsxs)(r.ol,{children:["\n",(0,d.jsxs)(r.li,{children:["\n",(0,d.jsxs)(r.p,{children:[(0,d.jsx)(r.strong,{children:"Comunica\xe7\xe3o Serial"})," (",(0,d.jsx)(r.code,{children:"setupSerial()"}),", ",(0,d.jsx)(r.code,{children:"readSerial()"}),", ",(0,d.jsx)(r.code,{children:"writeSerial()"}),")"]}),"\n",(0,d.jsxs)(r.ul,{children:["\n",(0,d.jsxs)(r.li,{children:["Porta: ",(0,d.jsx)(r.code,{children:"/dev/ttyACM0"})," (Arduino/Pico via USB)"]}),"\n",(0,d.jsxs)(r.li,{children:["Baud Rate: ",(0,d.jsx)(r.strong,{children:"115200 bps"})]}),"\n",(0,d.jsxs)(r.li,{children:["Protocolo:","\n",(0,d.jsxs)(r.ul,{children:["\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.strong,{children:"Recebe"}),": ",(0,d.jsx)(r.code,{children:"x,y,theta\\n"})," (posi\xe7\xe3o do rob\xf4 em metros e radianos)"]}),"\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.strong,{children:"Envia"}),": ",(0,d.jsx)(r.code,{children:"vl,vr\\n"})," (velocidades das rodas em m/s)"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(r.li,{children:["\n",(0,d.jsxs)(r.p,{children:[(0,d.jsx)(r.strong,{children:"Odometria"})," (",(0,d.jsx)(r.code,{children:"updateOdometry()"}),")"]}),"\n",(0,d.jsxs)(r.ul,{children:["\n",(0,d.jsx)(r.li,{children:"Calcula odometria diferencial"}),"\n",(0,d.jsxs)(r.li,{children:["Publica ",(0,d.jsx)(r.code,{children:"/odom"})," (nav_msgs/Odometry)"]}),"\n",(0,d.jsxs)(r.li,{children:["Publica ",(0,d.jsx)(r.code,{children:"/pose2d"})," (geometry_msgs/Pose2D)"]}),"\n",(0,d.jsxs)(r.li,{children:["Broadcast TF: ",(0,d.jsx)(r.code,{children:"odom"})," \u2192 ",(0,d.jsx)(r.code,{children:"base_link"})]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(r.li,{children:["\n",(0,d.jsxs)(r.p,{children:[(0,d.jsx)(r.strong,{children:"Controle de Velocidade"})," (",(0,d.jsx)(r.code,{children:"cmdVelCallback()"}),")"]}),"\n",(0,d.jsxs)(r.ul,{children:["\n",(0,d.jsxs)(r.li,{children:["Subscreve ",(0,d.jsx)(r.code,{children:"/robot/cmd_vel"})," (geometry_msgs/Twist)"]}),"\n",(0,d.jsx)(r.li,{children:"Converte velocidade linear (vx) e angular (wz) para velocidades das rodas (vl, vr)"}),"\n",(0,d.jsxs)(r.li,{children:["Usa cinem\xe1tica diferencial:","\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:"vl = vx - (wz * wheel_base / 2)\r\nvr = vx + (wz * wheel_base / 2)\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(r.li,{children:["\n",(0,d.jsxs)(r.p,{children:[(0,d.jsx)(r.strong,{children:"Par\xe2metros ROS"})," (",(0,d.jsx)(r.code,{children:"loadSettings()"}),")"]}),"\n",(0,d.jsxs)(r.ul,{children:["\n",(0,d.jsxs)(r.li,{children:["Carrega par\xe2metros do servidor ROS:","\n",(0,d.jsxs)(r.ul,{children:["\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.code,{children:"wheel_radius"}),": Raio da roda (metros)"]}),"\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.code,{children:"wheel_base"}),": Dist\xe2ncia entre rodas (metros)"]}),"\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.code,{children:"max_linear_velocity"}),": Velocidade linear m\xe1xima (m/s)"]}),"\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.code,{children:"max_angular_velocity"}),": Velocidade angular m\xe1xima (rad/s)"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(r.p,{children:[(0,d.jsxs)(r.strong,{children:["Pseudoc\xf3digo de ",(0,d.jsx)(r.code,{children:"system.step()"})]}),":"]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-cpp",children:"void System::step()\r\n{\r\n    // 1. Ler dados do Arduino via serial\r\n    if (readSerial()) {\r\n        // Atualiza pose interna (x, y, theta)\r\n        robot_.updatePose(x, y, theta);\r\n        \r\n        // 2. Calcular e publicar odometria\r\n        updateOdometry();\r\n        \r\n        // 3. Broadcast TF odom -> base_link\r\n        publishTF();\r\n    }\r\n    \r\n    // 4. Enviar comandos de velocidade para Arduino\r\n    writeSerial(vl, vr);\r\n}\n"})}),"\n",(0,d.jsx)(r.h2,{id:"t\xf3picos-e-mensagens",children:"T\xf3picos e Mensagens"}),"\n",(0,d.jsx)(r.h3,{id:"t\xf3picos-de-sensores",children:"T\xf3picos de Sensores"}),"\n",(0,d.jsxs)(r.table,{children:[(0,d.jsx)(r.thead,{children:(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.th,{children:"T\xf3pico"}),(0,d.jsx)(r.th,{children:"Tipo de Mensagem"}),(0,d.jsx)(r.th,{children:"Frequ\xeancia"}),(0,d.jsx)(r.th,{children:"Descri\xe7\xe3o"})]})}),(0,d.jsxs)(r.tbody,{children:[(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"/camera/image_raw"})}),(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"sensor_msgs/Image"})}),(0,d.jsx)(r.td,{children:"30 Hz"}),(0,d.jsx)(r.td,{children:"Imagem bruta da c\xe2mera"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"/camera/camera_info"})}),(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"sensor_msgs/CameraInfo"})}),(0,d.jsx)(r.td,{children:"30 Hz"}),(0,d.jsx)(r.td,{children:"Informa\xe7\xf5es de calibra\xe7\xe3o"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"/scan"})}),(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"sensor_msgs/LaserScan"})}),(0,d.jsx)(r.td,{children:"10 Hz"}),(0,d.jsx)(r.td,{children:"Dados do LIDAR"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"/imu/data"})}),(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"sensor_msgs/Imu"})}),(0,d.jsx)(r.td,{children:"100 Hz"}),(0,d.jsx)(r.td,{children:"Dados da IMU"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"/odom"})}),(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"nav_msgs/Odometry"})}),(0,d.jsx)(r.td,{children:"50 Hz"}),(0,d.jsx)(r.td,{children:"Odometria do rob\xf4"})]})]})]}),"\n",(0,d.jsx)(r.h3,{id:"t\xf3picos-de-controle",children:"T\xf3picos de Controle"}),"\n",(0,d.jsxs)(r.table,{children:[(0,d.jsx)(r.thead,{children:(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.th,{children:"T\xf3pico"}),(0,d.jsx)(r.th,{children:"Tipo de Mensagem"}),(0,d.jsx)(r.th,{children:"Frequ\xeancia"}),(0,d.jsx)(r.th,{children:"Descri\xe7\xe3o"})]})}),(0,d.jsxs)(r.tbody,{children:[(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"/cmd_vel"})}),(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"geometry_msgs/Twist"})}),(0,d.jsx)(r.td,{children:"10 Hz"}),(0,d.jsx)(r.td,{children:"Comandos de velocidade"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"/motor/left/cmd"})}),(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"std_msgs/Float64"})}),(0,d.jsx)(r.td,{children:"50 Hz"}),(0,d.jsx)(r.td,{children:"Comando motor esquerdo"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"/motor/right/cmd"})}),(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"std_msgs/Float64"})}),(0,d.jsx)(r.td,{children:"50 Hz"}),(0,d.jsx)(r.td,{children:"Comando motor direito"})]})]})]}),"\n",(0,d.jsx)(r.h3,{id:"t\xf3picos-de-navega\xe7\xe3o",children:"T\xf3picos de Navega\xe7\xe3o"}),"\n",(0,d.jsxs)(r.table,{children:[(0,d.jsx)(r.thead,{children:(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.th,{children:"T\xf3pico"}),(0,d.jsx)(r.th,{children:"Tipo de Mensagem"}),(0,d.jsx)(r.th,{children:"Frequ\xeancia"}),(0,d.jsx)(r.th,{children:"Descri\xe7\xe3o"})]})}),(0,d.jsxs)(r.tbody,{children:[(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"/path"})}),(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"nav_msgs/Path"})}),(0,d.jsx)(r.td,{children:"1 Hz"}),(0,d.jsx)(r.td,{children:"Trajet\xf3ria planejada"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"/goal"})}),(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"geometry_msgs/PoseStamped"})}),(0,d.jsx)(r.td,{children:"-"}),(0,d.jsx)(r.td,{children:"Objetivo de navega\xe7\xe3o"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"/map"})}),(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"nav_msgs/OccupancyGrid"})}),(0,d.jsx)(r.td,{children:"0.5 Hz"}),(0,d.jsx)(r.td,{children:"Mapa de ocupa\xe7\xe3o"})]})]})]}),"\n",(0,d.jsx)(r.h3,{id:"t\xf3picos-de-estado",children:"T\xf3picos de Estado"}),"\n",(0,d.jsxs)(r.table,{children:[(0,d.jsx)(r.thead,{children:(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.th,{children:"T\xf3pico"}),(0,d.jsx)(r.th,{children:"Tipo de Mensagem"}),(0,d.jsx)(r.th,{children:"Frequ\xeancia"}),(0,d.jsx)(r.th,{children:"Descri\xe7\xe3o"})]})}),(0,d.jsxs)(r.tbody,{children:[(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"/robot_state"})}),(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"robodc_msgs/RobotState"})}),(0,d.jsx)(r.td,{children:"5 Hz"}),(0,d.jsx)(r.td,{children:"Estado atual do rob\xf4"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"/battery_state"})}),(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"sensor_msgs/BatteryState"})}),(0,d.jsx)(r.td,{children:"1 Hz"}),(0,d.jsx)(r.td,{children:"Estado da bateria"})]})]})]}),"\n",(0,d.jsx)(r.h2,{id:"servi\xe7os",children:"Servi\xe7os"}),"\n",(0,d.jsxs)(r.table,{children:[(0,d.jsx)(r.thead,{children:(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.th,{children:"Servi\xe7o"}),(0,d.jsx)(r.th,{children:"Tipo"}),(0,d.jsx)(r.th,{children:"Descri\xe7\xe3o"})]})}),(0,d.jsxs)(r.tbody,{children:[(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"/set_mode"})}),(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"robodc_srvs/SetMode"})}),(0,d.jsx)(r.td,{children:"Muda o modo de opera\xe7\xe3o"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"/calibrate_sensors"})}),(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"std_srvs/Trigger"})}),(0,d.jsx)(r.td,{children:"Inicia calibra\xe7\xe3o de sensores"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"/emergency_stop"})}),(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"std_srvs/Trigger"})}),(0,d.jsx)(r.td,{children:"Parada de emerg\xeancia"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"/reset_odometry"})}),(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"std_srvs/Empty"})}),(0,d.jsx)(r.td,{children:"Reseta odometria"})]})]})]}),"\n",(0,d.jsx)(r.h2,{id:"actions",children:"Actions"}),"\n",(0,d.jsxs)(r.table,{children:[(0,d.jsx)(r.thead,{children:(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.th,{children:"Action"}),(0,d.jsx)(r.th,{children:"Tipo"}),(0,d.jsx)(r.th,{children:"Descri\xe7\xe3o"})]})}),(0,d.jsxs)(r.tbody,{children:[(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"/navigate_to_goal"})}),(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"robodc_msgs/NavigateAction"})}),(0,d.jsx)(r.td,{children:"Navegar at\xe9 um objetivo"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"/follow_path"})}),(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"robodc_msgs/FollowPathAction"})}),(0,d.jsx)(r.td,{children:"Seguir uma trajet\xf3ria"})]})]})]}),"\n",(0,d.jsx)(r.h2,{id:"diagrama-de-intera\xe7\xe3o",children:"Diagrama de Intera\xe7\xe3o"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     /camera/image_raw     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502 camera_node  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502               \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                            \u2502               \u2502\r\n                                            \u2502  navigation   \u2502\r\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     /scan                 \u2502     node      \u2502\r\n\u2502  lidar_node  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502               \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                            \u2502               \u2502\r\n                                            \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     /imu/data                     \u2502\r\n\u2502   imu_node   \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510              \u2502 /cmd_vel\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                    \u2502              \u2502\r\n                                    \u25bc              \u25bc\r\n                            \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n                            \u2502   motor_controller_node    \u2502\r\n                            \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n                                       \u2502\r\n                                       \u2502 /odom\r\n                                       \u25bc\r\n                            \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n                            \u2502  Odometry Loop  \u2502\r\n                            \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,d.jsx)(r.h2,{id:"fluxo-de-dados",children:"Fluxo de Dados"}),"\n",(0,d.jsx)(r.h3,{id:"1-percep\xe7\xe3o",children:"1. Percep\xe7\xe3o"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:"Sensores \u2192 N\xf3s de Drivers \u2192 Processamento \u2192 Fus\xe3o Sensorial\n"})}),"\n",(0,d.jsx)(r.h3,{id:"2-decis\xe3o",children:"2. Decis\xe3o"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:"Dados Processados \u2192 Navega\xe7\xe3o \u2192 Planejamento \u2192 Comandos\n"})}),"\n",(0,d.jsx)(r.h3,{id:"3-a\xe7\xe3o",children:"3. A\xe7\xe3o"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:"Comandos \u2192 Controle \u2192 Drivers de Motor \u2192 Atuadores\n"})}),"\n",(0,d.jsx)(r.h2,{id:"par\xe2metros-ros",children:"Par\xe2metros ROS"}),"\n",(0,d.jsx)(r.h3,{id:"par\xe2metros-globais",children:"Par\xe2metros Globais"}),"\n",(0,d.jsx)(r.p,{children:"Definidos no servidor de par\xe2metros ROS:"}),"\n",(0,d.jsxs)(r.ul,{children:["\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.code,{children:"/robot/name"}),": Nome do rob\xf4"]}),"\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.code,{children:"/robot/type"}),": Tipo de rob\xf4"]}),"\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.code,{children:"/robot/max_speed"}),": Velocidade m\xe1xima (m/s)"]}),"\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.code,{children:"/robot/wheel_base"}),": Dist\xe2ncia entre rodas (m)"]}),"\n"]}),"\n",(0,d.jsx)(r.h3,{id:"par\xe2metros-por-n\xf3",children:"Par\xe2metros por N\xf3"}),"\n",(0,d.jsx)(r.h4,{id:"base-controller",children:"Base Controller"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-yaml",children:"base_controller:\r\n  # Par\xe2metros f\xedsicos do rob\xf4\r\n  wheel_separation: 0.30      # metros (dist\xe2ncia entre rodas)\r\n  wheel_radius: 0.075         # metros\r\n  encoder_ppr: 1000           # pulsos por rota\xe7\xe3o\r\n  \r\n  # Limites de velocidade\r\n  max_linear_velocity: 0.5    # m/s\r\n  max_angular_velocity: 1.0   # rad/s\r\n  \r\n  # Controlador PID\r\n  pid_kp: 1.0\r\n  pid_ki: 0.1\r\n  pid_kd: 0.05\r\n  \r\n  # Frequ\xeancia de publica\xe7\xe3o\r\n  publish_rate: 50.0          # Hz\n"})}),"\n",(0,d.jsx)(r.h4,{id:"move-base",children:"Move Base"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-yaml",children:'move_base:\r\n  controller_frequency: 10.0\r\n  planner_frequency: 1.0\r\n  \r\n  # Toler\xe2ncias\r\n  xy_goal_tolerance: 0.1      # metros\r\n  yaw_goal_tolerance: 0.1     # radianos\r\n  \r\n  # Costmap comum\r\n  global_costmap:\r\n    update_frequency: 1.0\r\n    publish_frequency: 0.5\r\n    transform_tolerance: 0.5\r\n    \r\n  local_costmap:\r\n    update_frequency: 5.0\r\n    publish_frequency: 2.0\r\n    transform_tolerance: 0.5\r\n    width: 4.0               # metros\r\n    height: 4.0              # metros\r\n    resolution: 0.05         # metros/c\xe9lula\r\n    \r\n  # Planejador global (Dijkstra ou A*)\r\n  base_global_planner: "navfn/NavfnROS"\r\n  \r\n  # Planejador local (DWA)\r\n  base_local_planner: "dwa_local_planner/DWAPlannerROS"\r\n  \r\n  DWAPlannerROS:\r\n    max_vel_x: 0.5\r\n    min_vel_x: 0.1\r\n    max_vel_theta: 1.0\r\n    min_vel_theta: 0.4\r\n    \r\n    acc_lim_x: 0.5\r\n    acc_lim_theta: 1.0\r\n    \r\n    sim_time: 2.0\r\n    vx_samples: 10\r\n    vtheta_samples: 20\n'})}),"\n",(0,d.jsx)(r.h4,{id:"robot-localization-ekf",children:"Robot Localization (EKF)"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-yaml",children:"ekf_localization:\r\n  frequency: 30\r\n  \r\n  odom0: /odom\r\n  odom0_config: [true,  true,  false,    # x, y, z\r\n                 false, false, false,    # roll, pitch, yaw\r\n                 true,  true,  false,    # vx, vy, vz\r\n                 false, false, true,     # vroll, vpitch, vyaw\r\n                 false, false, false]    # ax, ay, az\r\n                 \r\n  imu0: /imu/data\r\n  imu0_config: [false, false, false,\r\n                false, false, true,      # yaw da IMU\r\n                false, false, false,\r\n                false, false, true,      # velocidade angular\r\n                true,  true,  true]      # acelera\xe7\xf5es\n"})}),"\n",(0,d.jsx)(r.h4,{id:"amcl",children:"AMCL"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-yaml",children:'amcl:\r\n  odom_model_type: "diff"\r\n  odom_alpha1: 0.2\r\n  odom_alpha2: 0.2\r\n  odom_alpha3: 0.2\r\n  odom_alpha4: 0.2\r\n  \r\n  min_particles: 500\r\n  max_particles: 5000\r\n  \r\n  laser_max_beams: 30\r\n  laser_model_type: "likelihood_field"\r\n  \r\n  update_min_d: 0.1        # metros\r\n  update_min_a: 0.2        # radianos\n'})}),"\n",(0,d.jsx)(r.h2,{id:"transforma\xe7\xf5es-tf",children:"Transforma\xe7\xf5es (TF)"}),"\n",(0,d.jsx)(r.p,{children:"\xc1rvore de transforma\xe7\xf5es do rob\xf4:"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:"map\r\n \u2514\u2500\u2500 odom\r\n      \u2514\u2500\u2500 base_link\r\n           \u251c\u2500\u2500 base_footprint\r\n           \u251c\u2500\u2500 camera_link\r\n           \u251c\u2500\u2500 lidar_link\r\n           \u2514\u2500\u2500 imu_link\n"})}),"\n",(0,d.jsx)(r.h3,{id:"frames-principais",children:"Frames Principais"}),"\n",(0,d.jsxs)(r.ul,{children:["\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.strong,{children:"map"}),": Frame do mapa global"]}),"\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.strong,{children:"odom"}),": Frame de odometria"]}),"\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.strong,{children:"base_link"}),": Centro do rob\xf4"]}),"\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.strong,{children:"camera_link"}),": Posi\xe7\xe3o da c\xe2mera"]}),"\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.strong,{children:"lidar_link"}),": Posi\xe7\xe3o do LIDAR"]}),"\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.strong,{children:"imu_link"}),": Posi\xe7\xe3o da IMU"]}),"\n"]}),"\n",(0,d.jsx)(r.h2,{id:"configura\xe7\xe3o-de-launch",children:"Configura\xe7\xe3o de Launch"}),"\n",(0,d.jsx)(r.p,{children:"Exemplo de arquivo launch principal:"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-xml",children:'<launch>\r\n  \x3c!-- Par\xe2metros globais --\x3e\r\n  <param name="robot/name" value="robodc_1gen"/>\r\n  \r\n  \x3c!-- Sensores --\x3e\r\n  <include file="$(find robodc_sensors)/launch/sensors.launch"/>\r\n  \r\n  \x3c!-- Controle --\x3e\r\n  <include file="$(find robodc_control)/launch/control.launch"/>\r\n  \r\n  \x3c!-- Navega\xe7\xe3o --\x3e\r\n  <include file="$(find robodc_navigation)/launch/navigation.launch"/>\r\n  \r\n  \x3c!-- State Machine --\x3e\r\n  <node name="state_machine" pkg="robodc_control" type="state_machine_node"/>\r\n  \r\n  \x3c!-- TF --\x3e\r\n  <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher"/>\r\n</launch>\n'})})]})}function h(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,d.jsx)(r,{...e,children:(0,d.jsx)(t,{...e})}):t(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>i,x:()=>l});var s=n(6540);const d={},o=s.createContext(d);function i(e){const r=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:i(e.components),s.createElement(o.Provider,{value:r},e.children)}}}]);