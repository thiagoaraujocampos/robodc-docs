"use strict";(globalThis.webpackChunkrobodc_docs=globalThis.webpackChunkrobodc_docs||[]).push([[8583],{785:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"api-rest","title":"API REST - Rob\xf4DC","description":"Informa\xe7\xf5es Gerais","source":"@site/docs/api-rest.md","sourceDirName":".","slug":"/api-rest","permalink":"/robodc-docs/api-rest","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/api-rest.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7}}');var o=s(4848),i=s(8453);const a={sidebar_position:7},l="API REST - Rob\xf4DC",d={},c=[{value:"Informa\xe7\xf5es Gerais",id:"informa\xe7\xf5es-gerais",level:2},{value:"Vis\xe3o Geral",id:"vis\xe3o-geral",level:2},{value:"Arquitetura",id:"arquitetura",level:2},{value:"Estrutura do Reposit\xf3rio",id:"estrutura-do-reposit\xf3rio",level:2},{value:"Endpoints da API",id:"endpoints-da-api",level:2},{value:"Namespace: <code>/ros</code>",id:"namespace-ros",level:3},{value:"<code>GET /ros/goal</code>",id:"get-rosgoal",level:4},{value:"<code>GET /ros/goTo/{location}</code>",id:"get-rosgotolocation",level:4},{value:"<code>GET /ros/status</code>",id:"get-rosstatus",level:4},{value:"<code>DELETE /ros/cancel</code>",id:"delete-roscancel",level:4},{value:"Namespace: <code>/led</code>",id:"namespace-led",level:3},{value:"Express\xf5es Dispon\xedveis",id:"express\xf5es-dispon\xedveis",level:4},{value:"<code>POST /led/changeExpression</code>",id:"post-ledchangeexpression",level:4},{value:"<code>GET /led/changeExpression/{expressionNumber}</code>",id:"get-ledchangeexpressionexpressionnumber",level:4},{value:"<code>GET /led/changeExpressionByBits/{expressionBits}</code>",id:"get-ledchangeexpressionbybitsexpressionbits",level:4},{value:"<code>GET /led/getExpressionsList</code>",id:"get-ledgetexpressionslist",level:4},{value:"Namespace: <code>/metadata</code>",id:"namespace-metadata",level:3},{value:"<code>GET /metadata/version</code>",id:"get-metadataversion",level:4},{value:"Implementa\xe7\xe3o Interna",id:"implementa\xe7\xe3o-interna",level:2},{value:"Locais Cadastrados",id:"locais-cadastrados",level:3},{value:"Move Base Client",id:"move-base-client",level:3},{value:"Bluetooth (LEDs)",id:"bluetooth-leds",level:3},{value:"Configura\xe7\xe3o e Deploy",id:"configura\xe7\xe3o-e-deploy",level:2},{value:"Instala\xe7\xe3o",id:"instala\xe7\xe3o",level:3},{value:"Depend\xeancias",id:"depend\xeancias",level:3},{value:"Vari\xe1veis de Ambiente",id:"vari\xe1veis-de-ambiente",level:3},{value:"Executar",id:"executar",level:3},{value:"Documenta\xe7\xe3o Swagger",id:"documenta\xe7\xe3o-swagger",level:3},{value:"Seguran\xe7a",id:"seguran\xe7a",level:2},{value:"Autentica\xe7\xe3o",id:"autentica\xe7\xe3o",level:3},{value:"Banco de Dados",id:"banco-de-dados",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Problema: <code>ModuleNotFoundError: No module named &#39;rospy&#39;</code>",id:"problema-modulenotfounderror-no-module-named-rospy",level:3},{value:"Problema: <code>Bluetooth: [Errno 16] Device or resource busy</code>",id:"problema-bluetooth-errno-16-device-or-resource-busy",level:3},{value:"Problema: <code>SimpleActionClient: move_base not available</code>",id:"problema-simpleactionclient-move_base-not-available",level:3},{value:"Melhorias Futuras",id:"melhorias-futuras",level:2},{value:"Colaboradores",id:"colaboradores",level:2},{value:"Links \xdateis",id:"links-\xfateis",level:2}];function t(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",input:"input",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"api-rest---rob\xf4dc",children:"API REST - Rob\xf4DC"})}),"\n",(0,o.jsx)(n.h2,{id:"informa\xe7\xf5es-gerais",children:"Informa\xe7\xf5es Gerais"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Reposit\xf3rio"}),": ",(0,o.jsx)(n.a,{href:"https://github.com/Hugo-Souza/RoboDC_api",children:"https://github.com/Hugo-Souza/RoboDC_api"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Nome"}),": RoboDC API"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Vers\xe3o"}),": v1.2.3"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Tecnologias"}),": Flask, Flask-RESTX, Python 3, ROS 1"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Licen\xe7a"}),": MIT License (Hugo Souza, 2023)"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"vis\xe3o-geral",children:"Vis\xe3o Geral"}),"\n",(0,o.jsxs)(n.p,{children:["A ",(0,o.jsx)(n.strong,{children:"RoboDC API"})," \xe9 uma API REST desenvolvida em ",(0,o.jsx)(n.strong,{children:"Flask"})," que serve como ponte entre aplica\xe7\xf5es cliente (como o app m\xf3vel) e o sistema ROS do rob\xf4. Ela exp\xf5e funcionalidades de navega\xe7\xe3o, controle e modifica\xe7\xe3o de express\xf5es faciais atrav\xe9s de endpoints HTTP."]}),"\n",(0,o.jsx)(n.admonition,{title:"API Moderna",type:"success",children:(0,o.jsxs)(n.p,{children:["Esta API substitui a implementa\xe7\xe3o legada presente em ",(0,o.jsx)(n.code,{children:"vivaldini/ROBO_DC/api/"}),". Oferece melhor arquitetura, documenta\xe7\xe3o Swagger autom\xe1tica e mais funcionalidades."]})}),"\n",(0,o.jsx)(n.h2,{id:"arquitetura",children:"Arquitetura"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502  Cliente         \u2502 (App M\xf3vel, Web, etc.)\r\n\u2502  HTTP Requests   \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n         \u2502 REST API (JSON)\r\n         \u2193\r\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502  Flask App       \u2502 (RoboDC_api)\r\n\u2502  Flask-RESTX     \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n         \u2502 rospy\r\n         \u2193\r\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502  ROS Master      \u2502 (roscore)\r\n\u2502  Topics/Actions  \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n         \u2502\r\n         \u2193\r\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502  Rob\xf4 F\xedsico     \u2502\r\n\u2502  Hardware        \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,o.jsx)(n.h2,{id:"estrutura-do-reposit\xf3rio",children:"Estrutura do Reposit\xf3rio"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"RoboDC_api/\r\n\u251c\u2500\u2500 src/\r\n\u2502   \u251c\u2500\u2500 __init__.py              # Factory do Flask\r\n\u2502   \u251c\u2500\u2500 config.py                # Configura\xe7\xf5es (dev/test/prod)\r\n\u2502   \u2502\r\n\u2502   \u2514\u2500\u2500 controllers/             # Controladores da API\r\n\u2502       \u251c\u2500\u2500 __init__.py          # Registro de namespaces\r\n\u2502       \u251c\u2500\u2500 ros_controller.py    # Endpoints ROS (navega\xe7\xe3o)\r\n\u2502       \u251c\u2500\u2500 led_controller.py    # Express\xf5es faciais (LEDs)\r\n\u2502       \u2514\u2500\u2500 metadata_controller.py # Metadados da API\r\n\u2502\r\n\u251c\u2500\u2500 app.py                       # Aplica\xe7\xe3o principal\r\n\u251c\u2500\u2500 requirements.txt             # Depend\xeancias Python\r\n\u251c\u2500\u2500 README.md\r\n\u2514\u2500\u2500 LICENSE.md\n"})}),"\n",(0,o.jsx)(n.h2,{id:"endpoints-da-api",children:"Endpoints da API"}),"\n",(0,o.jsxs)(n.h3,{id:"namespace-ros",children:["Namespace: ",(0,o.jsx)(n.code,{children:"/ros"})]}),"\n",(0,o.jsx)(n.p,{children:"Endpoints relacionados \xe0 navega\xe7\xe3o e controle ROS."}),"\n",(0,o.jsx)(n.h4,{id:"get-rosgoal",children:(0,o.jsx)(n.code,{children:"GET /ros/goal"})}),"\n",(0,o.jsx)(n.p,{children:"Retorna lista de todos os destinos dispon\xedveis no mapa do DC."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Request"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-http",children:"GET /ros/goal HTTP/1.1\r\nHost: 192.168.1.100:5000\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Response"})," (200 OK):"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\r\n  "available_locals": [\r\n    "LE-1",\r\n    "LE-2",\r\n    "LE-3",\r\n    "LE-4",\r\n    "Suporte",\r\n    "PPG-CC4",\r\n    "Maker",\r\n    "LE-5",\r\n    "Auditorio",\r\n    "Banheiros",\r\n    "Copa",\r\n    "Lig",\r\n    "Reunioes",\r\n    "Chefia",\r\n    "Graduacao",\r\n    "Recepcao",\r\n    "Home"\r\n  ]\r\n}\n'})}),"\n",(0,o.jsx)(n.h4,{id:"get-rosgotolocation",children:(0,o.jsx)(n.code,{children:"GET /ros/goTo/{location}"})}),"\n",(0,o.jsxs)(n.p,{children:["Envia o rob\xf4 para um local espec\xedfico usando ",(0,o.jsx)(n.code,{children:"move_base"})," action."]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Request"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-http",children:"GET /ros/goTo/Auditorio HTTP/1.1\r\nHost: 192.168.1.100:5000\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Response"})," (200 OK):"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\r\n  "result": "ACTIVE"\r\n}\n'})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Poss\xedveis Estados"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"PENDING"})," (0): Aguardando processamento"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"ACTIVE"})," (1): Rob\xf4 em movimento"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"SUCCEEDED"})," (3): Objetivo alcan\xe7ado"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"ABORTED"})," (4): Objetivo abortado (obst\xe1culo)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"REJECTED"})," (5): Objetivo rejeitado (inv\xe1lido)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"PREEMPTED"})," (2): Preemptado por novo objetivo"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"LOST"})," (9): Conex\xe3o perdida"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Comportamento"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Se ",(0,o.jsx)(n.code,{children:"{location}"})," n\xe3o estiver cadastrado, rob\xf4 vai para ",(0,o.jsx)(n.code,{children:'"Home"'})," (posi\xe7\xe3o padr\xe3o)"]}),"\n"]}),"\n",(0,o.jsx)(n.h4,{id:"get-rosstatus",children:(0,o.jsx)(n.code,{children:"GET /ros/status"})}),"\n",(0,o.jsx)(n.p,{children:"Retorna o status atual da navega\xe7\xe3o."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Request"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-http",children:"GET /ros/status HTTP/1.1\r\nHost: 192.168.1.100:5000\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Response"})," (200 OK):"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\r\n  "goal_state": "ACTIVE",\r\n  "comm_state": "ACTIVE"\r\n}\n'})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Goal States"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"PENDING"}),", ",(0,o.jsx)(n.code,{children:"ACTIVE"}),", ",(0,o.jsx)(n.code,{children:"PREEMPTED"}),", ",(0,o.jsx)(n.code,{children:"SUCCEEDED"}),", ",(0,o.jsx)(n.code,{children:"ABORTED"}),", ",(0,o.jsx)(n.code,{children:"REJECTED"}),", ",(0,o.jsx)(n.code,{children:"PREEMPTING"}),", ",(0,o.jsx)(n.code,{children:"RECALLING"}),", ",(0,o.jsx)(n.code,{children:"RECALLED"}),", ",(0,o.jsx)(n.code,{children:"LOST"})]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Comm States"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"WAITING_FOR_GOAL_ACK"})," (0)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"PENDING"})," (1)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"ACTIVE"})," (2)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"WAITING_FOR_RESULT"})," (3)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"WAITING_FOR_CANCEL_ACK"})," (4)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"RECALLING"})," (5)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"PREEMPTING"})," (6)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"DONE"})," (7)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"LOST"})," (8)"]}),"\n"]}),"\n",(0,o.jsx)(n.h4,{id:"delete-roscancel",children:(0,o.jsx)(n.code,{children:"DELETE /ros/cancel"})}),"\n",(0,o.jsxs)(n.p,{children:["Cancela todos os objetivos ativos do ",(0,o.jsx)(n.code,{children:"move_base"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Request"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-http",children:"DELETE /ros/cancel HTTP/1.1\r\nHost: 192.168.1.100:5000\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Response"})," (200 OK):"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\r\n  "result": "Mensagem de cancelamento enviada."\r\n}\n'})}),"\n",(0,o.jsxs)(n.h3,{id:"namespace-led",children:["Namespace: ",(0,o.jsx)(n.code,{children:"/led"})]}),"\n",(0,o.jsx)(n.p,{children:"Endpoints para controle de express\xf5es faciais via Bluetooth (ESP32)."}),"\n",(0,o.jsx)(n.h4,{id:"express\xf5es-dispon\xedveis",children:"Express\xf5es Dispon\xedveis"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'expressions = {\r\n    # Face completa\r\n    9: "face happy",\r\n    17: "face sad",\r\n    \r\n    # Ambos os olhos\r\n    10: "eyes neutral",\r\n    18: "eyes closed",\r\n    26: "eyes partially_closed",\r\n    34: "eyes partially_open",\r\n    42: "eyes slight_left",\r\n    50: "eyes left",\r\n    58: "eyes realleft",\r\n    66: "eyes slight_right",\r\n    74: "eyes right",\r\n    82: "eyes real_right",\r\n    \r\n    # Olho esquerdo\r\n    11: "left eye neutral",\r\n    19: "left eye closed",\r\n    27: "left eye partially_closed",\r\n    # ... (outros estados)\r\n    \r\n    # Olho direito\r\n    12: "right eye neutral",\r\n    20: "right eye closed",\r\n    28: "right eye partially_closed",\r\n    # ... (outros estados)\r\n    \r\n    # Boca\r\n    13: "mouth happy",\r\n    21: "mouth sad",\r\n    29: "mouth partially_open",\r\n    37: "mouth neutral",\r\n    45: "mouth opened"\r\n}\n'})}),"\n",(0,o.jsx)(n.h4,{id:"post-ledchangeexpression",children:(0,o.jsx)(n.code,{children:"POST /led/changeExpression"})}),"\n",(0,o.jsx)(n.p,{children:"Envia uma sequ\xeancia de express\xf5es para o ESP32."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Request"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-http",children:'POST /led/changeExpression HTTP/1.1\r\nHost: 192.168.1.100:5000\r\nContent-Type: application/json\r\n\r\n{\r\n  "expressionValues": [9, 18, 13]\r\n}\n'})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Response"})," (200 OK):"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\r\n  "result": "OK",\r\n  "sentExpressions": [9, 18, 13]\r\n}\n'})}),"\n",(0,o.jsx)(n.h4,{id:"get-ledchangeexpressionexpressionnumber",children:(0,o.jsx)(n.code,{children:"GET /led/changeExpression/{expressionNumber}"})}),"\n",(0,o.jsx)(n.p,{children:"Muda express\xe3o usando n\xfamero decimal."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Request"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-http",children:"GET /led/changeExpression/9 HTTP/1.1\r\nHost: 192.168.1.100:5000\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Response"})," (200 OK):"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\r\n  "result": "OK",\r\n  "expressionNumber": 9,\r\n  "expressionBits": "0b1001"\r\n}\n'})}),"\n",(0,o.jsx)(n.h4,{id:"get-ledchangeexpressionbybitsexpressionbits",children:(0,o.jsx)(n.code,{children:"GET /led/changeExpressionByBits/{expressionBits}"})}),"\n",(0,o.jsx)(n.p,{children:"Muda express\xe3o usando representa\xe7\xe3o bin\xe1ria."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Request"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-http",children:"GET /led/changeExpressionByBits/1001 HTTP/1.1\r\nHost: 192.168.1.100:5000\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Response"})," (200 OK):"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\r\n  "result": "OK",\r\n  "expressionNumber": 9,\r\n  "expressionBits": "1001"\r\n}\n'})}),"\n",(0,o.jsx)(n.h4,{id:"get-ledgetexpressionslist",children:(0,o.jsx)(n.code,{children:"GET /led/getExpressionsList"})}),"\n",(0,o.jsx)(n.p,{children:"Retorna lista completa de express\xf5es dispon\xedveis."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Request"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-http",children:"GET /led/getExpressionsList HTTP/1.1\r\nHost: 192.168.1.100:5000\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Response"})," (200 OK):"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\r\n  "9": "face happy",\r\n  "17": "face sad",\r\n  "10": "eyes neutral",\r\n  ...\r\n}\n'})}),"\n",(0,o.jsxs)(n.h3,{id:"namespace-metadata",children:["Namespace: ",(0,o.jsx)(n.code,{children:"/metadata"})]}),"\n",(0,o.jsx)(n.p,{children:"Metadados sobre a API."}),"\n",(0,o.jsx)(n.h4,{id:"get-metadataversion",children:(0,o.jsx)(n.code,{children:"GET /metadata/version"})}),"\n",(0,o.jsx)(n.p,{children:"Retorna vers\xe3o atual da API."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Request"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-http",children:"GET /metadata/version HTTP/1.1\r\nHost: 192.168.1.100:5000\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Response"})," (200 OK):"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\r\n  "version": "1.2.3"\r\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"implementa\xe7\xe3o-interna",children:"Implementa\xe7\xe3o Interna"}),"\n",(0,o.jsx)(n.h3,{id:"locais-cadastrados",children:"Locais Cadastrados"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'# src/controllers/ros_controller.py\r\navailable_locals = {\r\n    "LE-1": (-37.99, -5.45, 1.0, 0.0),\r\n    "LE-2": (-30.15, -5.03, 1.0, 0.0),\r\n    "LE-3": (-22.68, -4.45, 1.0, 0.0),\r\n    "LE-4": (-15.36, -4.11, 1.0, 0.0),\r\n    "Suporte": (-11.30, -3.92, 1.0, 0.0),\r\n    "PPG-CC4": (-2.54, -3.12, 1.0, 0.0),\r\n    "Maker": (7.46, -2.39, 1.0, 0.0),\r\n    "LE-5": (9.75, -2.36, 1.0, 0.0),\r\n    "Auditorio": (15.37, -1.86, 1.0, 0.0),\r\n    "Banheiros": (-38.74, -10.59, 1.0, 0.0),\r\n    "Copa": (-38.43, -16.47, 1.0, 0.0),\r\n    "Lig": (-38.01, -22.61, 1.0, 0.0),\r\n    "Reunioes": (-15.52, -23.80, 1.0, 0.0),\r\n    "Chefia": (-12.49, -23.54, 1.0, 0.0),\r\n    "Graduacao": (-18.67, -24.17, 1.0, 0.0),\r\n    "Recepcao": (-12.49, -23.54, 1.0, 0.0),\r\n    "Home": (-1.65, -21.18, 1.0, 0.0)\r\n}\r\n# Formato: (x, y, orientation_z, orientation_w) em metros\n'})}),"\n",(0,o.jsx)(n.h3,{id:"move-base-client",children:"Move Base Client"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'# src/controllers/ros_controller.py\r\ndef movebase_client(local):\r\n    global client\r\n    client = actionlib.SimpleActionClient(\'move_base\', MoveBaseAction)\r\n    \r\n    # Aguarda servidor move_base estar dispon\xedvel\r\n    client.wait_for_server()\r\n    \r\n    # Cria objetivo\r\n    goal = MoveBaseGoal()\r\n    goal.target_pose.header.frame_id = "map"\r\n    goal.target_pose.header.stamp = rospy.Time.now()\r\n    \r\n    # Define coordenadas do local\r\n    if local in available_locals:\r\n        goal.target_pose.pose.position.x = available_locals[local][0]\r\n        goal.target_pose.pose.position.y = available_locals[local][1]\r\n        goal.target_pose.pose.orientation.z = available_locals[local][2]\r\n        goal.target_pose.pose.orientation.w = available_locals[local][3]\r\n    else:\r\n        # Fallback para "Home" se local inv\xe1lido\r\n        goal.target_pose.pose.position.x = available_locals["Home"][0]\r\n        goal.target_pose.pose.position.y = available_locals["Home"][1]\r\n        goal.target_pose.pose.orientation.z = available_locals["Home"][2]\r\n        goal.target_pose.pose.orientation.w = available_locals["Home"][3]\r\n    \r\n    # Envia objetivo\r\n    client.send_goal(goal)\r\n    \r\n    time.sleep(3)  # Aguarda processamento\r\n    \r\n    return client.get_state()\n'})}),"\n",(0,o.jsx)(n.h3,{id:"bluetooth-leds",children:"Bluetooth (LEDs)"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'# src/controllers/led_controller.py\r\nimport bluetooth as bt\r\n\r\nesp32 = "HEAD"\r\naddress = "8C:AA:B5:93:69:EE"  # Endere\xe7o MAC do ESP32\r\n\r\ndef send_expression(expression_value):\r\n    port = 1\r\n    socket = bt.BluetoothSocket(bt.RFCOMM)\r\n    socket.connect((address, port))\r\n    socket.send(bytes([int(expression_value)]))\r\n    socket.close()\n'})}),"\n",(0,o.jsx)(n.h2,{id:"configura\xe7\xe3o-e-deploy",children:"Configura\xe7\xe3o e Deploy"}),"\n",(0,o.jsx)(n.h3,{id:"instala\xe7\xe3o",children:"Instala\xe7\xe3o"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Clonar reposit\xf3rio\r\ngit clone https://github.com/Hugo-Souza/RoboDC_api.git\r\ncd RoboDC_api\r\n\r\n# Criar ambiente virtual\r\npython3 -m venv venv\r\nsource venv/bin/activate\r\n\r\n# Instalar depend\xeancias\r\npip install -r requirements.txt\n"})}),"\n",(0,o.jsx)(n.h3,{id:"depend\xeancias",children:"Depend\xeancias"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"Flask==2.3.0\r\nFlask-RESTX==1.1.0\r\nflask-migrate==4.0.4\r\nflask-sqlalchemy==3.0.5\r\nflask-cors==4.0.0\r\npybluez==0.23\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Depend\xeancias ROS"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo apt install ros-noetic-actionlib\r\nsudo apt install ros-noetic-move-base-msgs\r\npip install rospkg rospy\n"})}),"\n",(0,o.jsx)(n.h3,{id:"vari\xe1veis-de-ambiente",children:"Vari\xe1veis de Ambiente"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# .env\r\nCONFIG=dev  # ou 'test', 'prod'\r\nROS_NODE=movebase_client_py\n"})}),"\n",(0,o.jsx)(n.h3,{id:"executar",children:"Executar"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Inicializar ROS\r\nroscore\r\n\r\n# Em outro terminal, iniciar API\r\npython app.py\r\n\r\n# API estar\xe1 dispon\xedvel em:\r\n# http://0.0.0.0:5000\n"})}),"\n",(0,o.jsx)(n.h3,{id:"documenta\xe7\xe3o-swagger",children:"Documenta\xe7\xe3o Swagger"}),"\n",(0,o.jsxs)(n.p,{children:["Acesse ",(0,o.jsx)(n.code,{children:"http://192.168.1.100:5000/"})," para visualizar documenta\xe7\xe3o interativa."]}),"\n",(0,o.jsx)(n.h2,{id:"seguran\xe7a",children:"Seguran\xe7a"}),"\n",(0,o.jsx)(n.admonition,{title:"CORS Habilitado",type:"warning",children:(0,o.jsxs)(n.p,{children:["A API tem CORS configurado para aceitar requisi\xe7\xf5es de qualquer origem (",(0,o.jsx)(n.code,{children:'"*"'}),"). Isso \xe9 adequado para desenvolvimento e ambientes controlados (rede interna do rob\xf4), mas deve ser restrito em produ\xe7\xe3o."]})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'# src/__init__.py\r\nCORS(app, resources={"*": {"origins": "*"}})\n'})}),"\n",(0,o.jsx)(n.h3,{id:"autentica\xe7\xe3o",children:"Autentica\xe7\xe3o"}),"\n",(0,o.jsxs)(n.p,{children:["A API suporta autentica\xe7\xe3o via ",(0,o.jsx)(n.strong,{children:"API Key"})," (header ",(0,o.jsx)(n.code,{children:"Authorization"}),"), mas atualmente n\xe3o est\xe1 ativa."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"# src/controllers/__init__.py\r\nauthorizations = {\r\n    'apikey': {\r\n        'type': 'apiKey',\r\n        'in': 'header',\r\n        'name': 'Authorization'\r\n    }\r\n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"banco-de-dados",children:"Banco de Dados"}),"\n",(0,o.jsx)(n.p,{children:"Configura\xe7\xe3o para banco de dados (SQLAlchemy), mas n\xe3o utilizado ativamente:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"# src/config.py\r\nclass DevelopmentConfig(Config):\r\n    SQLALCHEMY_DATABASE_URI = 'sqlite:///flask_main.db'\r\n\r\nclass ProductionConfig(Config):\r\n    SQLALCHEMY_DATABASE_URI = os.getenv('DATABASE_URL')\n"})}),"\n",(0,o.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,o.jsxs)(n.h3,{id:"problema-modulenotfounderror-no-module-named-rospy",children:["Problema: ",(0,o.jsx)(n.code,{children:"ModuleNotFoundError: No module named 'rospy'"})]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Solu\xe7\xe3o"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'# Certifique-se de que ROS est\xe1 instalado\r\nsource /opt/ros/noetic/setup.bash\r\n\r\n# Adicione ao ~/.bashrc\r\necho "source /opt/ros/noetic/setup.bash" >> ~/.bashrc\n'})}),"\n",(0,o.jsxs)(n.h3,{id:"problema-bluetooth-errno-16-device-or-resource-busy",children:["Problema: ",(0,o.jsx)(n.code,{children:"Bluetooth: [Errno 16] Device or resource busy"})]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Solu\xe7\xe3o"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Verificar dispositivos Bluetooth conectados\r\nhcitool con\r\n\r\n# Desconectar dispositivo\r\nsudo hcitool dc {endere\xe7o_MAC}\r\n\r\n# Reiniciar servi\xe7o Bluetooth\r\nsudo systemctl restart bluetooth\n"})}),"\n",(0,o.jsxs)(n.h3,{id:"problema-simpleactionclient-move_base-not-available",children:["Problema: ",(0,o.jsx)(n.code,{children:"SimpleActionClient: move_base not available"})]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Solu\xe7\xe3o"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Verificar se move_base est\xe1 rodando\r\nrosnode list | grep move_base\r\n\r\n# Verificar a\xe7\xe3o dispon\xedvel\r\nrostopic list | grep move_base\r\n\r\n# Iniciar navega\xe7\xe3o do rob\xf4\r\nroslaunch robodc_bringup navigation.launch\n"})}),"\n",(0,o.jsx)(n.h2,{id:"melhorias-futuras",children:"Melhorias Futuras"}),"\n",(0,o.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,o.jsxs)(n.li,{className:"task-list-item",children:[(0,o.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Autentica\xe7\xe3o JWT"]}),"\n",(0,o.jsxs)(n.li,{className:"task-list-item",children:[(0,o.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Rate limiting"]}),"\n",(0,o.jsxs)(n.li,{className:"task-list-item",children:[(0,o.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Logs estruturados"]}),"\n",(0,o.jsxs)(n.li,{className:"task-list-item",children:[(0,o.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Testes unit\xe1rios e integra\xe7\xe3o"]}),"\n",(0,o.jsxs)(n.li,{className:"task-list-item",children:[(0,o.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Docker container"]}),"\n",(0,o.jsxs)(n.li,{className:"task-list-item",children:[(0,o.jsx)(n.input,{type:"checkbox",disabled:!0})," ","WebSocket para updates em tempo real"]}),"\n",(0,o.jsxs)(n.li,{className:"task-list-item",children:[(0,o.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Suporte a m\xfaltiplos rob\xf4s"]}),"\n",(0,o.jsxs)(n.li,{className:"task-list-item",children:[(0,o.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Dashboard de monitoramento"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"colaboradores",children:"Colaboradores"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Hugo Souza"})," (Hugo-Souza) - Desenvolvedor Principal"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Heitor Souza"})," (souzaitor) - Contribuidor"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Thiago Araujo Campos"})," (thiagoaraujocampos) - Integra\xe7\xe3o App"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Bruno Leonel"})," (Bruno12leonel) - Contribuidor"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"links-\xfateis",children:"Links \xdateis"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\ud83d\udd17 ",(0,o.jsx)(n.a,{href:"https://github.com/Hugo-Souza/RoboDC_api",children:"Reposit\xf3rio no GitHub"})]}),"\n",(0,o.jsxs)(n.li,{children:["\ud83d\udcd6 ",(0,o.jsx)(n.a,{href:"https://flask.palletsprojects.com/",children:"Flask Documentation"})]}),"\n",(0,o.jsxs)(n.li,{children:["\ud83d\udcda ",(0,o.jsx)(n.a,{href:"https://flask-restx.readthedocs.io/",children:"Flask-RESTX Documentation"})]}),"\n",(0,o.jsxs)(n.li,{children:["\ud83e\udd16 ",(0,o.jsx)(n.a,{href:"http://wiki.ros.org/actionlib",children:"ROS actionlib"})]}),"\n",(0,o.jsxs)(n.li,{children:["\ud83d\udce1 ",(0,o.jsx)(n.a,{href:"https://github.com/pybluez/pybluez",children:"PyBluez Documentation"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(t,{...e})}):t(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>l});var r=s(6540);const o={},i=r.createContext(o);function a(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);